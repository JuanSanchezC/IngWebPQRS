-- MySQL Script generated by MySQL Workbench
-- Sat 06 May 2017 09:58:20 -05
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema pqrsdb
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema pqrsdb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `pqrsdb` DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ;
USE `pqrsdb` ;

-- -----------------------------------------------------
-- Table `pqrsdb`.`tipoSolicitud`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `pqrsdb`.`tipoSolicitud` ;

CREATE TABLE IF NOT EXISTS `pqrsdb`.`tipoSolicitud` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `pqrsdb`.`filial`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `pqrsdb`.`filial` ;

CREATE TABLE IF NOT EXISTS `pqrsdb`.`filial` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(45) NOT NULL,
  `codigo` VARCHAR(10) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `pqrsdb`.`factura`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `pqrsdb`.`factura` ;

CREATE TABLE IF NOT EXISTS `pqrsdb`.`factura` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `fechaVenta` DATETIME NOT NULL,
  `filial` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_factura_filial1_idx` (`filial` ASC),
  CONSTRAINT `fk_factura_filial1`
    FOREIGN KEY (`filial`)
    REFERENCES `pqrsdb`.`filial` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `pqrsdb`.`tipoEmpleado`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `pqrsdb`.`tipoEmpleado` ;

CREATE TABLE IF NOT EXISTS `pqrsdb`.`tipoEmpleado` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(45) NOT NULL,
  `codigo` VARCHAR(10) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `codigo_UNIQUE` (`codigo` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `pqrsdb`.`empleado`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `pqrsdb`.`empleado` ;

CREATE TABLE IF NOT EXISTS `pqrsdb`.`empleado` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `nombres` VARCHAR(45) NOT NULL,
  `tipoEmpleado` INT NOT NULL,
  `apellidos` VARCHAR(45) NOT NULL,
  `correo` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_empleado_tipoEmpleado1_idx` (`tipoEmpleado` ASC),
  CONSTRAINT `fk_empleado_tipoEmpleado1`
    FOREIGN KEY (`tipoEmpleado`)
    REFERENCES `pqrsdb`.`tipoEmpleado` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `pqrsdb`.`tipoMotivo`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `pqrsdb`.`tipoMotivo` ;

CREATE TABLE IF NOT EXISTS `pqrsdb`.`tipoMotivo` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `pqrsdb`.`motivo`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `pqrsdb`.`motivo` ;

CREATE TABLE IF NOT EXISTS `pqrsdb`.`motivo` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(45) NOT NULL,
  `tipoMotivo` INT NOT NULL,
  `codigo` VARCHAR(10) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_motivo_table11_idx` (`tipoMotivo` ASC),
  CONSTRAINT `fk_motivo_table11`
    FOREIGN KEY (`tipoMotivo`)
    REFERENCES `pqrsdb`.`tipoMotivo` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `pqrsdb`.`solicitud`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `pqrsdb`.`solicitud` ;

CREATE TABLE IF NOT EXISTS `pqrsdb`.`solicitud` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `fechaCreacion` DATETIME NOT NULL,
  `descripcion` VARCHAR(300) NOT NULL,
  `correo` VARCHAR(45) NOT NULL,
  `factura` INT NULL,
  `filial` INT NOT NULL,
  `empleadoAsignado` INT NOT NULL,
  `tipoSolicitud` INT NOT NULL,
  `respuesta` VARCHAR(300) NULL,
  `fechaRespuesta` DATE NULL,
  `satisfaccion` VARCHAR(45) NULL,
  `fechaAsignacion` DATETIME NOT NULL,
  `motivo` INT NOT NULL,
  `fechaSuceso` DATETIME NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_solicitud_factura1_idx` (`factura` ASC),
  INDEX `fk_solicitud_filial1_idx` (`filial` ASC),
  INDEX `fk_solicitud_empleado1_idx` (`empleadoAsignado` ASC),
  INDEX `fk_solicitud_tipoSolicitud1_idx` (`tipoSolicitud` ASC),
  INDEX `fk_solicitud_motivo1_idx` (`motivo` ASC),
  CONSTRAINT `fk_solicitud_factura1`
    FOREIGN KEY (`factura`)
    REFERENCES `pqrsdb`.`factura` (`id`)
    ON DELETE SET NULL
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_solicitud_filial1`
    FOREIGN KEY (`filial`)
    REFERENCES `pqrsdb`.`filial` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_solicitud_empleado1`
    FOREIGN KEY (`empleadoAsignado`)
    REFERENCES `pqrsdb`.`empleado` (`id`)
    ON DELETE CASCADE
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_solicitud_tipoSolicitud1`
    FOREIGN KEY (`tipoSolicitud`)
    REFERENCES `pqrsdb`.`tipoSolicitud` (`id`)
    ON DELETE CASCADE
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_solicitud_motivo1`
    FOREIGN KEY (`motivo`)
    REFERENCES `pqrsdb`.`motivo` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `pqrsdb`.`tipoProducto`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `pqrsdb`.`tipoProducto` ;

CREATE TABLE IF NOT EXISTS `pqrsdb`.`tipoProducto` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(45) NOT NULL,
  `precio` FLOAT NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `pqrsdb`.`producto`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `pqrsdb`.`producto` ;

CREATE TABLE IF NOT EXISTS `pqrsdb`.`producto` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `tipoProducto` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_producto_tipoProducto1_idx` (`tipoProducto` ASC),
  CONSTRAINT `fk_producto_tipoProducto1`
    FOREIGN KEY (`tipoProducto`)
    REFERENCES `pqrsdb`.`tipoProducto` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `pqrsdb`.`facturaProducto`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `pqrsdb`.`facturaProducto` ;

CREATE TABLE IF NOT EXISTS `pqrsdb`.`facturaProducto` (
  `factura` INT NOT NULL,
  `producto` INT NOT NULL,
  PRIMARY KEY (`factura`, `producto`),
  INDEX `fk_facturaProducto_producto1_idx` (`producto` ASC),
  CONSTRAINT `fk_facturaProducto_factura1`
    FOREIGN KEY (`factura`)
    REFERENCES `pqrsdb`.`factura` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_facturaProducto_producto1`
    FOREIGN KEY (`producto`)
    REFERENCES `pqrsdb`.`producto` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `pqrsdb`.`tipoSolicitud`
-- -----------------------------------------------------
START TRANSACTION;
USE `pqrsdb`;
INSERT INTO `pqrsdb`.`tipoSolicitud` (`id`, `nombre`) VALUES (1, 'peticion');
INSERT INTO `pqrsdb`.`tipoSolicitud` (`id`, `nombre`) VALUES (2, 'queja');
INSERT INTO `pqrsdb`.`tipoSolicitud` (`id`, `nombre`) VALUES (3, 'sugerencia');
INSERT INTO `pqrsdb`.`tipoSolicitud` (`id`, `nombre`) VALUES (4, 'reclamo');

COMMIT;


-- -----------------------------------------------------
-- Data for table `pqrsdb`.`filial`
-- -----------------------------------------------------
START TRANSACTION;
USE `pqrsdb`;
INSERT INTO `pqrsdb`.`filial` (`id`, `nombre`, `codigo`) VALUES (1, 'Centro Maravilloso', 'centro');
INSERT INTO `pqrsdb`.`filial` (`id`, `nombre`, `codigo`) VALUES (2, 'Oriente Tech', 'oriente');
INSERT INTO `pqrsdb`.`filial` (`id`, `nombre`, `codigo`) VALUES (3, 'Occi Compras', 'occidente');
INSERT INTO `pqrsdb`.`filial` (`id`, `nombre`, `codigo`) VALUES (4, 'Surface', 'sur');

COMMIT;


-- -----------------------------------------------------
-- Data for table `pqrsdb`.`factura`
-- -----------------------------------------------------
START TRANSACTION;
USE `pqrsdb`;
INSERT INTO `pqrsdb`.`factura` (`id`, `fechaVenta`, `filial`) VALUES (1, '2016-12-12 15:25:15', 1);
INSERT INTO `pqrsdb`.`factura` (`id`, `fechaVenta`, `filial`) VALUES (2, '2017-01-25 10:20:00', 4);
INSERT INTO `pqrsdb`.`factura` (`id`, `fechaVenta`, `filial`) VALUES (3, '2017-02-23 16:45:12', 3);
INSERT INTO `pqrsdb`.`factura` (`id`, `fechaVenta`, `filial`) VALUES (4, '2017-03-11 09:13:00', 2);
INSERT INTO `pqrsdb`.`factura` (`id`, `fechaVenta`, `filial`) VALUES (5, '2017-04-21 14:55:02', 4);

COMMIT;


-- -----------------------------------------------------
-- Data for table `pqrsdb`.`tipoEmpleado`
-- -----------------------------------------------------
START TRANSACTION;
USE `pqrsdb`;
INSERT INTO `pqrsdb`.`tipoEmpleado` (`id`, `nombre`, `codigo`) VALUES (1, 'Gerente de Cuentas Corporativas', 'gerente_cc');
INSERT INTO `pqrsdb`.`tipoEmpleado` (`id`, `nombre`, `codigo`) VALUES (2, 'Empleado Administrativo', 'admin');

COMMIT;


-- -----------------------------------------------------
-- Data for table `pqrsdb`.`empleado`
-- -----------------------------------------------------
START TRANSACTION;
USE `pqrsdb`;
INSERT INTO `pqrsdb`.`empleado` (`id`, `nombres`, `tipoEmpleado`, `apellidos`, `correo`) VALUES (1, 'Antonio', 1, 'Garcia', 'antongar@correo.com');
INSERT INTO `pqrsdb`.`empleado` (`id`, `nombres`, `tipoEmpleado`, `apellidos`, `correo`) VALUES (2, 'Roberto', 2, 'Perez', 'perezro@correo.com');
INSERT INTO `pqrsdb`.`empleado` (`id`, `nombres`, `tipoEmpleado`, `apellidos`, `correo`) VALUES (3, 'Pedro ', 2, 'Sanchez', 'pechez@correo.com');
INSERT INTO `pqrsdb`.`empleado` (`id`, `nombres`, `tipoEmpleado`, `apellidos`, `correo`) VALUES (4, 'Andrea', 2, 'Guzman', 'guziman@correo.com');

COMMIT;


-- -----------------------------------------------------
-- Data for table `pqrsdb`.`tipoMotivo`
-- -----------------------------------------------------
START TRANSACTION;
USE `pqrsdb`;
INSERT INTO `pqrsdb`.`tipoMotivo` (`id`, `nombre`) VALUES (1, 'servicio');
INSERT INTO `pqrsdb`.`tipoMotivo` (`id`, `nombre`) VALUES (2, 'producto');

COMMIT;


-- -----------------------------------------------------
-- Data for table `pqrsdb`.`motivo`
-- -----------------------------------------------------
START TRANSACTION;
USE `pqrsdb`;
INSERT INTO `pqrsdb`.`motivo` (`id`, `nombre`, `tipoMotivo`, `codigo`) VALUES (1, 'producto defectuso', 2, 'pd');
INSERT INTO `pqrsdb`.`motivo` (`id`, `nombre`, `tipoMotivo`, `codigo`) VALUES (2, 'garantia', 2, 'gr');
INSERT INTO `pqrsdb`.`motivo` (`id`, `nombre`, `tipoMotivo`, `codigo`) VALUES (3, 'mal servicio', 1, 'ms');

COMMIT;


-- -----------------------------------------------------
-- Data for table `pqrsdb`.`solicitud`
-- -----------------------------------------------------
START TRANSACTION;
USE `pqrsdb`;
INSERT INTO `pqrsdb`.`solicitud` (`id`, `fechaCreacion`, `descripcion`, `correo`, `factura`, `filial`, `empleadoAsignado`, `tipoSolicitud`, `respuesta`, `fechaRespuesta`, `satisfaccion`, `fechaAsignacion`, `motivo`, `fechaSuceso`) VALUES (1, '2017-05-04 16:01:50', 'Me siento estafado', 'estudianteingwebudea@gmail.com', 1, 1, 1, 4, NULL, NULL, '0', '2017-05-04 16:01:50', 2, '2017-05-01 12:01:50');
INSERT INTO `pqrsdb`.`solicitud` (`id`, `fechaCreacion`, `descripcion`, `correo`, `factura`, `filial`, `empleadoAsignado`, `tipoSolicitud`, `respuesta`, `fechaRespuesta`, `satisfaccion`, `fechaAsignacion`, `motivo`, `fechaSuceso`) VALUES (2, '2017-05-04 17:01:50', 'Que falta de Respeto!!', 'estudianteingwebudea@gmail.com', NULL, 2, 1, 2, NULL, NULL, '0', '2017-05-04 17:01:50', 1, '2017-05-02 17:01:50');
INSERT INTO `pqrsdb`.`solicitud` (`id`, `fechaCreacion`, `descripcion`, `correo`, `factura`, `filial`, `empleadoAsignado`, `tipoSolicitud`, `respuesta`, `fechaRespuesta`, `satisfaccion`, `fechaAsignacion`, `motivo`, `fechaSuceso`) VALUES (3, '2017-05-05 09:01:50', 'No era lo que esperaba', 'estudianteingwebudea@gmail.com', 2, 3, 2, 1, 'Debio leer las condiciones', '2017-05-06 10:01:50', '0', '2017-05-05 11:01:50', 2, '2017-05-01 11:01:50');
INSERT INTO `pqrsdb`.`solicitud` (`id`, `fechaCreacion`, `descripcion`, `correo`, `factura`, `filial`, `empleadoAsignado`, `tipoSolicitud`, `respuesta`, `fechaRespuesta`, `satisfaccion`, `fechaAsignacion`, `motivo`, `fechaSuceso`) VALUES (4, '2017-05-07 09:01:50', 'Que mal servicio', 'estudianteingwebudea@gmail.com', NULL, 4, 1, 3, 'Usted tambien fue grosero', '2017-05-08 09:01:50', '3', '2017-05-07 10:01:50', 1, '2017-05-03 09:01:50');

COMMIT;


-- -----------------------------------------------------
-- Data for table `pqrsdb`.`tipoProducto`
-- -----------------------------------------------------
START TRANSACTION;
USE `pqrsdb`;
INSERT INTO `pqrsdb`.`tipoProducto` (`id`, `nombre`, `precio`) VALUES (1, 'televisor', 500000);
INSERT INTO `pqrsdb`.`tipoProducto` (`id`, `nombre`, `precio`) VALUES (2, 'nevera', 800000);
INSERT INTO `pqrsdb`.`tipoProducto` (`id`, `nombre`, `precio`) VALUES (3, 'microondas', 300000);
INSERT INTO `pqrsdb`.`tipoProducto` (`id`, `nombre`, `precio`) VALUES (4, 'computador mesa', 1000000);
INSERT INTO `pqrsdb`.`tipoProducto` (`id`, `nombre`, `precio`) VALUES (5, 'computador portatil', 1100000);
INSERT INTO `pqrsdb`.`tipoProducto` (`id`, `nombre`, `precio`) VALUES (6, 'tablet', 700000);
INSERT INTO `pqrsdb`.`tipoProducto` (`id`, `nombre`, `precio`) VALUES (7, 'smartphone', 400000);
INSERT INTO `pqrsdb`.`tipoProducto` (`id`, `nombre`, `precio`) VALUES (8, 'lavadora', 900000);
INSERT INTO `pqrsdb`.`tipoProducto` (`id`, `nombre`, `precio`) VALUES (9, 'aire acondicionado', 950000);

COMMIT;


-- -----------------------------------------------------
-- Data for table `pqrsdb`.`producto`
-- -----------------------------------------------------
START TRANSACTION;
USE `pqrsdb`;
INSERT INTO `pqrsdb`.`producto` (`id`, `tipoProducto`) VALUES (1, 1);
INSERT INTO `pqrsdb`.`producto` (`id`, `tipoProducto`) VALUES (2, 1);
INSERT INTO `pqrsdb`.`producto` (`id`, `tipoProducto`) VALUES (3, 2);
INSERT INTO `pqrsdb`.`producto` (`id`, `tipoProducto`) VALUES (4, 2);
INSERT INTO `pqrsdb`.`producto` (`id`, `tipoProducto`) VALUES (5, 3);
INSERT INTO `pqrsdb`.`producto` (`id`, `tipoProducto`) VALUES (6, 3);
INSERT INTO `pqrsdb`.`producto` (`id`, `tipoProducto`) VALUES (7, 4);
INSERT INTO `pqrsdb`.`producto` (`id`, `tipoProducto`) VALUES (8, 4);
INSERT INTO `pqrsdb`.`producto` (`id`, `tipoProducto`) VALUES (9, 5);
INSERT INTO `pqrsdb`.`producto` (`id`, `tipoProducto`) VALUES (10, 5);
INSERT INTO `pqrsdb`.`producto` (`id`, `tipoProducto`) VALUES (11, 6);
INSERT INTO `pqrsdb`.`producto` (`id`, `tipoProducto`) VALUES (12, 6);
INSERT INTO `pqrsdb`.`producto` (`id`, `tipoProducto`) VALUES (13, 7);
INSERT INTO `pqrsdb`.`producto` (`id`, `tipoProducto`) VALUES (14, 7);
INSERT INTO `pqrsdb`.`producto` (`id`, `tipoProducto`) VALUES (15, 8);
INSERT INTO `pqrsdb`.`producto` (`id`, `tipoProducto`) VALUES (16, 8);
INSERT INTO `pqrsdb`.`producto` (`id`, `tipoProducto`) VALUES (17, 9);
INSERT INTO `pqrsdb`.`producto` (`id`, `tipoProducto`) VALUES (18, 9);

COMMIT;


-- -----------------------------------------------------
-- Data for table `pqrsdb`.`facturaProducto`
-- -----------------------------------------------------
START TRANSACTION;
USE `pqrsdb`;
INSERT INTO `pqrsdb`.`facturaProducto` (`factura`, `producto`) VALUES (1, 2);
INSERT INTO `pqrsdb`.`facturaProducto` (`factura`, `producto`) VALUES (1, 3);
INSERT INTO `pqrsdb`.`facturaProducto` (`factura`, `producto`) VALUES (2, 9);
INSERT INTO `pqrsdb`.`facturaProducto` (`factura`, `producto`) VALUES (3, 4);
INSERT INTO `pqrsdb`.`facturaProducto` (`factura`, `producto`) VALUES (4, 1);
INSERT INTO `pqrsdb`.`facturaProducto` (`factura`, `producto`) VALUES (5, 2);
INSERT INTO `pqrsdb`.`facturaProducto` (`factura`, `producto`) VALUES (5, 8);
INSERT INTO `pqrsdb`.`facturaProducto` (`factura`, `producto`) VALUES (4, 5);

COMMIT;

